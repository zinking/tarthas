/*
 * This file was generated by the Gradle 'init' task.
 *
 * This project uses @Incubating APIs which are subject to change.
 */

plugins {
    id 'java'
    id 'com.github.johnrengelman.shadow' version '7.1.2'
    id 'tarthas.scala-application-conventions'
    id 'maven-publish'
    id 'com.diffplug.spotless' version '6.13.0'
}

apply plugin: 'com.diffplug.spotless'

spotless {
    java {
        googleJavaFormat()
    }
}

dependencies {
    implementation 'org.scala-lang:scala-library:2.11.12'
    implementation 'com.alibaba:bytekit-core:0.0.8-SNAPSHOT'
    implementation 'net.bytebuddy:byte-buddy-agent:1.11.6'
    implementation 'com.taobao.arthas:arthas-core:3.6.8-tencent-2.1-SNAPSHOT'
    implementation 'com.taobao.arthas:arthas-spy:3.6.8-tencent-2.1-SNAPSHOT'
    implementation 'org.benf:cfr:0.151'
    implementation 'org.apache.httpcomponents:httpclient:4.5.10'

//    classpath 'com.diffplug.spotless:spotless-plugin-gradle:6.13.0'

}

application {
    // Define the main class for the application.
    mainClass = 'tdemos.ArthasDemo'
}

shadowJar {
    archiveBaseName.set('shadow-tarthas')
    archiveClassifier.set('')
    archiveVersion.set('2.1-SNAPSHOT')
}

repositories {
    mavenLocal()
    mavenCentral()
    maven { url "https://mirrors.tencent.com/repository/maven/tianqiong-releases" }
    maven { url "https://mirrors.tencent.com/repository/maven/tencent_public" }
    maven { url "https://mirrors.tencent.com/repository/maven/tencent_public_snapshots" }
}
apply plugin: 'maven-publish'

publishing {
    publications {
        shadow(MavenPublication) { publication ->
            groupId = 'com.tencent.tarthas'
            artifactId = 'shadow-tarthas'
            version = '2.1-SNAPSHOT'
//            from components.java
            from project.shadow.component(publication)
        }
    }
}


